{"ast":null,"code":"var _jsxFileName = \"/Users/mac/Documents/Project/ReactDoc/nlp_frontend/src/pages/Master/Frekuensi.js\";\nimport React, { useRef, useState, useEffect } from 'react';\nimport Card from '@material-ui/core/Card';\nimport CardContent from '@material-ui/core/CardContent';\nimport { withStyles } from '@material-ui/core/styles';\nimport Divider from '@material-ui/core/Divider';\nimport Grid from '@material-ui/core/Grid';\nimport MaterialTable from 'material-table';\nimport Paper from '@material-ui/core/Paper';\nimport { Wrapper } from '../../components';\nimport axios from 'axios';\nimport Alert from '@material-ui/lab/Alert';\nconst api = axios.create({\n  baseURL: 'http://localhost:8000'\n});\n\nfunction Frekuensi() {\n  const [state, setState] = useState([]);\n  const [mahasiswa, setMahasiswa] = useState([]);\n  const [frekuensi, setFrekuensi] = useState([]); //for error handling\n\n  const [iserror, setIserror] = useState(false);\n  const [errorMessages, setErrorMessages] = useState([]);\n\n  const refreshTable = () => {\n    const fetchData = async () => {\n      const frekuensi = await api.get('freq_all');\n      setState(frekuensi.data);\n    };\n\n    fetchData();\n  };\n\n  useEffect(() => {\n    refreshTable();\n  }, []); //Operation Add\n\n  const handleRowAdd = (newData, resolve) => {\n    let errorList = [];\n\n    if (newData.frekuensi === undefined) {\n      errorList.push(\"Harap Isi Frekuensi\");\n    }\n\n    if (errorList.length < 1) {\n      api.post(\"freq_add\", newData).then(res => {\n        let dataToAdd = state;\n        dataToAdd.push(newData);\n        setState(dataToAdd);\n        resolve();\n        setErrorMessages([]);\n        setIserror(false);\n        refreshTable();\n      }).catch(error => {\n        setErrorMessages([\"Cannot add data. Server error!\"]);\n        setIserror(true);\n        resolve();\n      });\n    } else {\n      setErrorMessages(errorList);\n      setIserror(true);\n      resolve();\n    }\n  };\n\n  const handleRowUpdate = (newData, oldData, resolve) => {\n    //validation\n    let errorList = [];\n\n    if (newData.frekuensi === undefined) {\n      errorList.push(\"Harap Isi Frekuensi\");\n    }\n\n    if (errorList.length < 1) {\n      api.patch(\"/freq_operation/\" + newData.id, newData).then(res => {\n        const dataUpdate = [...state];\n        const index = oldData.tableData.id;\n        dataUpdate[index] = newData;\n        setState([...dataUpdate]);\n        resolve();\n        setIserror(false);\n        setErrorMessages([]);\n        refreshTable();\n      }).catch(error => {\n        setErrorMessages([\"Update failed! Server error\"]);\n        setIserror(true);\n        resolve();\n      });\n    } else {\n      setErrorMessages(errorList);\n      setIserror(true);\n      resolve();\n    }\n  };\n\n  const handleRowDelete = (oldData, resolve) => {\n    api.delete('freq_operation/' + oldData.id).then(res => {\n      const dataDelete = [...state];\n      const index = oldData.tableData.id;\n      dataDelete.splice(index, 1);\n      setState([...dataDelete]);\n      resolve();\n      refreshTable();\n    }).catch(error => {\n      setErrorMessages([\"Delete failed! Server error\"]);\n      setIserror(true);\n      resolve();\n    });\n  };\n\n  var columns = [{\n    title: 'Frekuensi',\n    field: 'frekuensi'\n  }, {\n    title: 'Praktikum',\n    field: 'praktikum'\n  }, {\n    title: 'Semester',\n    field: 'semester'\n  } // {\n  //   title: 'Birth Place',\n  //   field: 'birthCity',\n  //   lookup: { 34: 'İstanbul', 63: 'Şanlıurfa' },\n  // },\n  ];\n  return /*#__PURE__*/React.createElement(Wrapper, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Card, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(CardContent, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 15\n    }\n  }, \"Data Frekuensi\"), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 15\n    }\n  }, iserror && /*#__PURE__*/React.createElement(Alert, {\n    severity: \"error\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 19\n    }\n  }, errorMessages.map((msg, i) => {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      key: i,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 34\n      }\n    }, msg);\n  }))), /*#__PURE__*/React.createElement(MaterialTable, {\n    title: \"Tabel Frekuensi\",\n    columns: columns,\n    data: state,\n    editable: {\n      onRowAdd: newData => new Promise(resolve => {\n        setTimeout(() => {\n          handleRowAdd(newData, resolve);\n        }, 600);\n      }),\n      onRowUpdate: (newData, oldData) => new Promise(resolve => {\n        setTimeout(() => {\n          handleRowUpdate(newData, oldData, resolve);\n          resolve(); // if (oldData) {\n          //   setState((prevState) => {\n          //     const data = [...prevState.data];\n          //     data[data.indexOf(oldData)] = newData;\n          //     return { ...prevState, data };\n          //   });\n          // }\n        }, 600);\n      }),\n      onRowDelete: oldData => new Promise(resolve => {\n        setTimeout(() => {\n          resolve();\n          setState(prevState => {\n            handleRowDelete(oldData, resolve);\n          });\n        }, 600);\n      })\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 15\n    }\n  }))));\n}\n\nexport default Frekuensi;","map":{"version":3,"sources":["/Users/mac/Documents/Project/ReactDoc/nlp_frontend/src/pages/Master/Frekuensi.js"],"names":["React","useRef","useState","useEffect","Card","CardContent","withStyles","Divider","Grid","MaterialTable","Paper","Wrapper","axios","Alert","api","create","baseURL","Frekuensi","state","setState","mahasiswa","setMahasiswa","frekuensi","setFrekuensi","iserror","setIserror","errorMessages","setErrorMessages","refreshTable","fetchData","get","data","handleRowAdd","newData","resolve","errorList","undefined","push","length","post","then","res","dataToAdd","catch","error","handleRowUpdate","oldData","patch","id","dataUpdate","index","tableData","handleRowDelete","delete","dataDelete","splice","columns","title","field","map","msg","i","onRowAdd","Promise","setTimeout","onRowUpdate","onRowDelete","prevState"],"mappings":"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","sourcesContent":["import React ,{ useRef, useState , useEffect } from 'react';\nimport Card from '@material-ui/core/Card';\nimport CardContent from '@material-ui/core/CardContent';\nimport { withStyles  } from '@material-ui/core/styles';\nimport Divider from '@material-ui/core/Divider';\nimport Grid from '@material-ui/core/Grid';\nimport MaterialTable from 'material-table';\nimport Paper from '@material-ui/core/Paper';\nimport { Wrapper } from '../../components';\nimport axios from 'axios';\nimport Alert from '@material-ui/lab/Alert';\n\nconst api = axios.create({\n  baseURL: 'http://localhost:8000'\n});\n\n\nfunction Frekuensi(){\n  const [state, setState] = useState([]);\n  const [mahasiswa, setMahasiswa] = useState([]);\n  const [frekuensi, setFrekuensi] = useState([]);\n  //for error handling\n  const [iserror, setIserror] = useState(false);\n  const [errorMessages, setErrorMessages] = useState([]);\n\n  const refreshTable = () => {\n    const fetchData = async () => {\n      const frekuensi = await api.get('freq_all')\n      setState(frekuensi.data);\n    };\n    fetchData();\n  }\n  useEffect(() => {\n    refreshTable();\n  }, []);\n\n\n  //Operation Add\n\n  const handleRowAdd = (newData,resolve) => {\n    let errorList = [];\n    if(newData.frekuensi === undefined){\n      errorList.push(\"Harap Isi Frekuensi\");\n    }\n\n    if(errorList.length < 1){\n        api.post(\"freq_add\",newData).\n        then(res => {\n          let dataToAdd = state;\n          dataToAdd.push(newData);\n          setState(dataToAdd);\n          resolve()\n          setErrorMessages([])\n          setIserror(false)\n          refreshTable();\n        })\n        .catch(error => {\n          setErrorMessages([\"Cannot add data. Server error!\"])\n          setIserror(true)\n          resolve()\n        })\n      }else{\n        setErrorMessages(errorList)\n        setIserror(true)\n        resolve()\n      }\n    }\n\n\n    const handleRowUpdate = (newData, oldData, resolve) => {\n      //validation\n      let errorList = []\n      if(newData.frekuensi === undefined){\n        errorList.push(\"Harap Isi Frekuensi\");\n      }\n\n      if(errorList.length < 1){\n        api.patch(\"/freq_operation/\"+newData.id, newData)\n        .then(res => {\n          const dataUpdate = [...state];\n          const index = oldData.tableData.id;\n          dataUpdate[index] = newData;\n          setState([...dataUpdate]);\n          resolve()\n          setIserror(false)\n          setErrorMessages([])\n          refreshTable();\n        })\n        .catch(error => {\n          setErrorMessages([\"Update failed! Server error\"])\n          setIserror(true)\n          resolve()\n\n        })\n      }else{\n        setErrorMessages(errorList)\n        setIserror(true)\n        resolve()\n      }\n\n    }\n  const handleRowDelete = (oldData, resolve) => {\n    api.delete('freq_operation/'+oldData.id)\n    .then(res => {\n      const dataDelete = [...state];\n        const index = oldData.tableData.id;\n        dataDelete.splice(index, 1);\n        setState([...dataDelete]);\n        resolve()\n        refreshTable();\n      })\n      .catch(error => {\n        setErrorMessages([\"Delete failed! Server error\"])\n        setIserror(true)\n        resolve()\n      })\n  }\n\n  var columns = [\n    { title: 'Frekuensi', field: 'frekuensi' },\n    { title: 'Praktikum', field: 'praktikum' },\n    { title: 'Semester', field: 'semester' },\n    // {\n    //   title: 'Birth Place',\n    //   field: 'birthCity',\n    //   lookup: { 34: 'İstanbul', 63: 'Şanlıurfa' },\n    // },\n  ];\n\n  return(\n    <Wrapper>\n      <Card>\n          <CardContent>\n              <h3>Data Frekuensi</h3>\n              <div>\n                {iserror &&\n                  <Alert severity=\"error\">\n                      {errorMessages.map((msg, i) => {\n                          return <div key={i}>{msg}</div>\n                      })}\n                  </Alert>\n                }\n              </div>\n              <MaterialTable\n              title=\"Tabel Frekuensi\"\n              columns={columns}\n              data={state}\n              editable={{\n                onRowAdd: (newData) =>\n                  new Promise((resolve) => {\n\n                    setTimeout(() => {\n                      handleRowAdd(newData, resolve)\n\n                    }, 600);\n                  }),\n                onRowUpdate: (newData, oldData) =>\n                  new Promise((resolve) => {\n                    setTimeout(() => {\n                      handleRowUpdate(newData, oldData, resolve)\n                      resolve();\n                      // if (oldData) {\n                      //   setState((prevState) => {\n                      //     const data = [...prevState.data];\n                      //     data[data.indexOf(oldData)] = newData;\n                      //     return { ...prevState, data };\n                      //   });\n                      // }\n                    }, 600);\n                  }),\n                onRowDelete: (oldData) =>\n                  new Promise((resolve) => {\n                    setTimeout(() => {\n                      resolve();\n                      setState((prevState) => {\n                        handleRowDelete(oldData, resolve)\n                      });\n                    }, 600);\n                  }),\n                }\n              }\n            />\n          </CardContent>\n      </Card>\n    </Wrapper>\n  );\n}\n\nexport default Frekuensi;\n"]},"metadata":{},"sourceType":"module"}